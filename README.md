# enshan

最新的恩山论坛每日签到脚本，适用于青龙面板

## 更新日期：2026-02-03

最近一直在忙其他事情，完全没有留意到由于论坛护盾升级，导致脚本失效；好像有热心网友1月份就发邮件？（不知道是不是站内的，忘了）提醒，但我是2月才看到，抱歉！

这个shell脚本失效了。但
💡 **核心矛盾**是 curl (Shell脚本) 的技术天花板，而不是脚本写得不对。

恩山的防火墙（顶象/云盾）机制：
Cookie 到期后，服务器会返回一段 <script>...</script> 代码，浏览器会自动运行它，算出新的 Token，然后自动刷新拿到新 Cookie。

而Shell 脚本的能力：
只能看懂文本，看不懂也跑不了那段 <script> 代码。

结果：一旦到了硬性过期时间，脚本就必死无疑，无法自救。

🛠️ **现在的选择**

既然纯 Shell 脚本无法突破这个限制，有以下两种选择：

### 方案 A：继续使用当前脚本（接受半自动）
如果不想折腾复杂的环境（如 Python/Docker），依然想用这个 Shell 脚本：

接受现状：这个脚本无法实现“永久全自动”。

操作频率：恩山的防火墙 Cookie 有效期大约是 6-12 小时（或者是每日固定重置）。

维护方式：需要每天（或每当收到失败推送时）手动提取一次 Cookie 填入 config.json。

优点：脚本轻量，随处可跑。

缺点：人肉运维，非常烦。


### 方案 B：彻底解决（使用 Python/浏览器模拟）
如果您有能力在设备上运行 Docker 或者 Python，或者在青龙面板中安装需要的python、linux依赖，就可以使用更高级的方案。 

只有使用 Selenium、Puppeteer 或 DrissionPage 这类能“模拟真实浏览器”的工具，才能在 Cookie 过期时自动运行 JS 代码，实现真正的“永久自动续期”。

现在已经有一个基于 Python + DrissionPage 的解决方案了，为了验证可用性，要等明天看能否正常使用。

若无其他意外，将于2026年02月04日更新这个解决方案。



# 以下内容已失效，可忽略不看。
# 以下内容已失效，可忽略不看。
# 以下内容已失效，可忽略不看。


## 更新日期：2025-12-16

增加了定时执行随机摇摆函数。（即到定时后，生成0-900秒的随机数（15分钟=900秒），倒数结束再执行）

## 使用方法（以青龙面板以及pushplus推送为例）

**<mark><u>自行获取恩山论坛自己账号的UID、cookies以及通知推送方式的token。</u></mark>**

1、打开青龙面板的脚本管理

2、复制/导入本仓下的config.json文件到自己青龙面板的脚本管理

3、修改config.json中为自己的UID、cookies以及推送token

![](https://github.com/FunSeason/enshan/blob/main/image/01.png)

4、复制/导入本仓下的enshan.sh文件到自己青龙面板的脚本管理

                *<mark>注意config.json和enshan.sh放在同一目录下。</mark>*

5、自定义定时任务，时间到了就会自动执行。

![](https://github.com/FunSeason/enshan/blob/main/image/02.png)

# 推送结果示例如下：

![](https://github.com/FunSeason/enshan/blob/main/image/03.png)
